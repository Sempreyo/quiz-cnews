document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".quiz");if(e){const t=e.querySelectorAll(".quiz__fields"),n=e.querySelector(".quiz__next"),l=e.querySelector(".quiz__error");let c=1;t.forEach(t=>{const n=t.querySelectorAll(".js-toggle-field .field__label"),l=e.querySelector(".js-reset-fields input"),c=t.querySelectorAll('.field:not(.js-reset-fields) input[type="checkbox"]'),r=t.querySelectorAll('.field:not(.js-reset-fields) input[type="text"]');c.forEach(e=>{e.addEventListener("change",e=>{e.currentTarget.checked&&(l.checked=!1)})}),r.forEach(e=>{e.addEventListener("change",e=>{e.currentTarget.checked&&(l.checked=!1)})}),n.forEach((e,t,n)=>{e.addEventListener("click",e=>{if(e.currentTarget.parentElement.classList.toggle("active"),t>1){let e=!1;e||(n[t+1].parentElement.classList.remove("closed"),e=!0)}})}),l&&l.addEventListener("change",t=>{const n=e.querySelectorAll(".quiz__step--4 .field:not(.js-reset-fields) input");t.currentTarget.checked&&n.forEach(e=>{e.value="",e.checked=!1,e.parentElement.classList.remove("active")})})}),n.addEventListener("click",r=>{const s=e.querySelector(".quiz__step.open"),i=e.querySelectorAll(".js-check-nothing"),a=e.querySelectorAll(".quiz__step--3 .field:not(.js-reset-fields) input, .quiz__step--4 .field:not(.js-reset-fields) input");let o=!1;if(c<12&&r.preventDefault(),c<13)if(c>2){t[c-3].querySelectorAll(".field input").forEach(e=>{(e.checked||"text"===e.getAttribute("type")&&""!==e.value||c<3||c>4)&&(o=!0)}),o?(s.classList.remove("open"),s.nextElementSibling.classList.add("open"),c++,l.classList.add("d-none")):l.classList.remove("d-none")}else s.classList.remove("open"),s.nextElementSibling.classList.add("open"),c++,s.nextElementSibling.querySelector(".hidden")&&setTimeout(()=>{s.nextElementSibling.querySelector(".hidden").classList.remove("hidden")},100);switch(c){case 2:n.textContent="Вперед";break;case 3:n.textContent="Больше не знаю";break;case 4:n.textContent="Вперед";break;case 5:a.forEach(e=>{(e.checked||"text"===e.getAttribute("type")&&""!=e.value)&&i.forEach(t=>{t.insertAdjacentHTML("beforebegin",`<label class="field field--checkbox">\n\t\t\t\t\t\t\t\t\t<input class="field__input" type="checkbox" name="${t.closest(".quiz__step").getAttribute("data-name")}_${e.getAttribute("name")}" /><span class="field__label">${e.value}</span><b></b>\n\t\t\t\t\t\t\t\t</label>`),t.querySelector("input").addEventListener("change",e=>{const t=e.currentTarget.closest(".quiz__step").querySelectorAll(".field:not(.js-check-nothing) input");e.currentTarget.checked&&t.forEach(e=>{e.value="",e.checked=!1})})})});break;case 12:n.setAttribute("type","submit");break;case 13:e.addEventListener("submit",t=>{t.preventDefault();const l=e.querySelectorAll(".field input"),c=[];l.forEach(e=>{const t=e.getAttribute("name"),n=e.value;("checkbox"===e.getAttribute("type")&&e.checked||"text"===e.getAttribute("type")&&""!=e.value)&&c.push([t,n])}),fetch("path-to-ajax",{method:"POST",body:c}).then(e=>{console.log(e)}).catch(e=>{console.error(e)}),n.classList.add("d-none")}),s.nextElementSibling.querySelector(".hidden")&&setTimeout(()=>{s.nextElementSibling.querySelector(".hidden").classList.remove("hidden")},100),setTimeout(()=>{e.classList.add("d-none")},3e3)}})}});
//# sourceMappingURL=maps/main.min.js.map
